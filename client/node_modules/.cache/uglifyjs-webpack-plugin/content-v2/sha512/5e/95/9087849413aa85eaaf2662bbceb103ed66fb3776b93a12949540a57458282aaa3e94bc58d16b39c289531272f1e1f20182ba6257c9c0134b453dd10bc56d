{"code":"!function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},a.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=5)}([function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(){window.addEventListener(\"keydown\",function(e){[32,65,68,87,83].includes(e.keyCode)&&(e.preventDefault(),window.keys=window.keys||{},window.keys[e.keyCode]=\"keydown\"==e.type)}),window.addEventListener(\"keyup\",function(e){[32,65,68,87,83].includes(e.keyCode)&&(window.keys[e.keyCode]=\"keydown\"==e.type)});var e=void 0;return(e=document.getElementById(\"gameCanvas\")).height=600,e.width=600,{canvas:e,ctx:e.getContext(\"2d\"),FPS:30}}()},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i,n=a(0),l=(i=n)&&i.__esModule?i:{default:i};t.default=function(){function e(e,t,a,i,n){this.width=2,this._id=e,this.color=\"white\",this.height=7,this.speed=5,this.angle=i,this.x=t,this.y=a,this.mode=0}return e.prototype.newPos=function(){this.x+=this.speed*Math.sin(this.angle),this.y-=this.speed*Math.cos(this.angle)},e.prototype.update=function(){l.default.ctx.save(),l.default.ctx.translate(this.x,this.y),l.default.ctx.rotate(this.angle),l.default.ctx.fillStyle=this.color,l.default.ctx.fillRect(this.width/-2,this.height/-2,this.width,this.height),l.default.ctx.restore()},{Bullet:e}}()},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=s(a(0)),n=s(a(1)),l=s(a(3));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.width=30,this.color=\"white\",this.height=30,this.speed=0,this.angle=i,this.moveAngle=0,this.x=t,this.y=a,this.bullets=[],this.canFire=!0,this._id=e}return e.prototype.newPos=function(){this.angle+=this.moveAngle*Math.PI/180,this.x+=this.speed*Math.sin(this.angle),this.y-=this.speed*Math.cos(this.angle)},e.prototype.update=function(){i.default.ctx.save(),i.default.ctx.translate(this.x,this.y),i.default.ctx.rotate(this.angle),i.default.ctx.fillStyle=this.color,i.default.ctx.fillRect(this.width/-2,this.height/-2,this.width,this.height),i.default.ctx.restore()},e.prototype.fireBullet=function(){if(this.canFire&&window.keys[32]){this.canFire=!1,this.bullets.push(new n.default.Bullet(this._id,this.x,this.y,this.angle,this.speed)),l.default.sendData([\"FIRE_BULLET\",{_id:this._id,x:this.x,y:this.y,angle:this.angle}]);var e=this;setTimeout(function(){e.canFire=!0},150)}},e.prototype.pos=function(){return{_id:this._id,x:this.x,y:this.y,angle:this.angle}},{PlayerShip:e}}()},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i,n,l=a(6),s=a(4),d=(i=s)&&i.__esModule?i:{default:i};t.default=(n=void 0,{init:function(){(n=new WebSocket(\"ws://lowkeymultiplayer.herokuapp.com\")).onmessage=function(e){var t=(0,l.socketEP)(e);switch(t.event){case\"CREATE_PLAYER\":console.log(\"create player\"),d.default.updateGameState({type:\"CREATE_PLAYER\",payload:{_id:t.data._id}});break;case\"FIRE_BULLET\":d.default.updateGameState({type:\"FIRE_BULLET\",payload:t.data});break;case\"INCOMING_PLAYER_POS\":d.default.updateGameState({type:\"INCOMING_PLAYER_POS\",payload:t.data});break;case\"REMOVE_PLAYER\":d.default.updateGameState({type:\"REMOVE_PLAYER\",payload:t.data})}},setInterval(function(){n.send(JSON.stringify([\"MY_PLAYER_POS\",d.default.gameState.myPlayer.pos()]))},1e3/30)},sendData:function(e){n.send(JSON.stringify(e))}})},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i,n=s(a(2)),l=s(a(1));function s(e){return e&&e.__esModule?e:{default:e}}t.default={updateGameState:function(e){switch(e.type){case\"LOG\":console.log(e.payload);break;case\"CREATE_PLAYER\":i.myPlayer=new n.default.PlayerShip(e.payload._id);break;case\"FIRE_BULLET\":var t=new l.default.Bullet(e.payload._id,e.payload.x,e.payload.y,e.payload.angle);i.bullets.push(t);break;case\"REMOVE_PLAYER\":var a=i.players.map(function(e){return e._id}).indexOf(e.payload._id);i.players.splice(a,1);break;case\"INCOMING_PLAYER_POS\":if(i.players.map(function(e){return e._id}).includes(e.payload._id))i.players.forEach(function(t){t._id==e.payload._id&&(t.x=e.payload.x,t.y=e.payload.y,t.angle=e.payload.angle)});else{var s=new n.default.PlayerShip(e.payload._id,e.payload.x,e.payload.y,e.payload.angle);i.players.push(s)}}},gameState:i={players:[],myPlayer:{},bullets:[]}}},function(e,t,a){\"use strict\";var i=s(a(0)),n=(s(a(2)),s(a(1)),s(a(3))),l=s(a(4));function s(e){return e&&e.__esModule?e:{default:e}}!function(){function e(){var e,t,a,n,s;e=0,t=0,a=i.default.canvas.height,n=i.default.canvas.width,s=\"black\",i.default.ctx.fillStyle=s,i.default.ctx.fillRect(e,t,a,n),l.default.gameState.myPlayer.moveAngle=0,l.default.gameState.myPlayer.speed=0,window.keys&&window.keys[32]&&l.default.gameState.myPlayer.fireBullet(),window.keys&&window.keys[65]&&(l.default.gameState.myPlayer.moveAngle=-3),window.keys&&window.keys[68]&&(l.default.gameState.myPlayer.moveAngle=3),window.keys&&window.keys[87]&&(l.default.gameState.myPlayer.speed=3),window.keys&&window.keys[83]&&(l.default.gameState.myPlayer.speed=-3),l.default.gameState.myPlayer.newPos(),l.default.gameState.myPlayer.update(),l.default.gameState.bullets.forEach(function(e){e.newPos(),e.update()}),l.default.gameState.players.forEach(function(e){e.update()}),l.default.gameState.myPlayer.bullets.forEach(function(e){e.newPos(),e.update()})}n.default.init(),setInterval(function(){e()},1e3/i.default.FPS)}()},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.socketEP=function(e){var t=JSON.parse(e.data);return{event:t[0],data:t[1]}}}]);","extractedComments":[]}